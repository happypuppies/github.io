<!DOCTYPE html>
<html lang="en">
<head>
    <!-- The meta tag comes from https://www.w3schools.com/css/css_rwd_viewport.asp -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Breakdown</title>
    <link rel="icon" href="images/logo.png">
    <script src="js/script.js"></script>
    <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/stylesheet.css">
</head>
<body>  <!-- Test  two my cloning JS -->
    <header class="col-12 outer-margin">
        <div class="navbar" id="myTopnav">
            <a href = "index.html">Home</a>
            <div class = "dropdown">
                <a class="active" href = "methodology.html">Methodology</a>
                <div class = "dropdown-content">
                    <a href="#data">Data Acquisition and Preprocessing</a>
                    <a href="#spatial">Spatial Analysis</a>
                    <a href="#visualization">Visualization</a>
                    <a href="#programming">Programming and Customization</a>
                </div>  
            </div>   
            <div class = "dropdown">
                <!-- Use the <a> element to open the dropdown menu -->
                <a href="deliverables.html">Deliverables</a>
                <div class = "dropdown-content">
                    <a href="deliverables.html#streams">Headwater Streams</a>
                    <a href="deliverables.html#trace-tools">Trace Tools</a>
                    <a href="deliverables.html#static-map">Static Map</a>
                    <a href="deliverables.html#web-exp">Web Experience</a>
                    <a href="deliverables.html#file-gdb">File Geodatabase</a>
                </div>
            </div>
            <a href="javascript:void(0);" class="icon" onclick="navBarMin()">
                <i class="fa fa-bars"></i>
            </a>
        </div>
    </header>
    <!--Photo Credit: Chelsea Marcantonio via the Nature Conservancy of Canada -->
    <section class="col-12 outer-margin">
        <div class="methodology-header">
            <div class ="header-overlay header-overlay-gradient">
                <h1 class="page-title">Methodology</h1>
                <p class="blurb-text">All the steps taken to complete the project.</p>
                <p id="photo-credit">Photo Credit: Chelsea Marcantonio via the Nature Conservancy of Canada</p>
            </div>
        </div>
    </section>
    <section class="col-12">
        <h2 id="data">Phase 1: Data Acquisition and Preprocessing</h2>
    <div class="section-style-1col">
        <h3 class="title-left">Challenges Encountered</h3>
        <ul>
            <li>High resolution elevation data is expensive or incomplete.</li>
        </ul>
        <div class="col-12">
            <img src="images/HighResDataFootprints.jpg" class="exp-image" alt="footprint of high res elevation data not covering Area of Interest">
        </div>
        <p>Footprints of high resolution data from NRCAN do not cover the Area Of Interest (yellow polygon).</p>
        <ul>
            <li>High resolution aerial imagery data for model verificatin was also hard to find.</li>
        </ul>
        <h3 class="title-left">Outcomes</h3>
        <ul>
            <li>Ontario GeoHub provided great elevation data in their Ontario Integrated Hydrology dataset,
            as well as cold water data in their Aquatic Resource Area data.</li>
        </ul>
        <div class="col-12">
            <img src="images/OIHdata.jpg" class="exp-image" alt="Ontario Integrated Hydrology Data web interface view">
        </div>
            <p>Ontario GeoHub was our best source of data, with elevation data used from Ontario Integrated Hydrology (OIH).</p>
        <ul>
            <li>South Central Ontario Orthophotography (SCOOP) 2018 high resolution imagery tiles were provided by the NCC for model verification.</li>
        </ul>
        <div class="col-12">
            <img src="images/SCOOPimages.jpg" class="exp-image2" alt="SCOOP 2018 high res tiles">
        </div>
            <p>One of seven SCOOP 2018 tiles provided by NCC.</p>
        <ul>
            <li>Data was extracted by mask to the Area Of Interest and Projected to NAD 83 Ontario MNR Lambert.</li>
        </ul>
        <h3 class="title-left">Recommendations</h3>
        <ul>
            <li>Higher resolution elevation data would yield more reliable results.  NRCAN Geogratis data 
            has a resource with 1 metre elevation data but it is not currently complete over the Area Of Interest but this 
            data set could be revisited at a later date to update the model created in this study.</li>
        </ul>
    </div>
    </section>
    <section class="col-12 background-grey">
        <h2 id="spatial">Phase 2: Spatial Analysis</h2>
    <div class="section-style-1col">
        <h3 class="title-left">Challenges Encountered</h3>
        <ul>
            <li>Though we had hoped to include our Trace Downstream and Trace Upstream tools in the delivered Experience
            it was found that the NCC AGOL account does not allow the use of trace networks, and no way was found to
            replicate this functionality with the tools available, so it was left as desktop only.</li>
            <li>Deciding on a stream threshold value to determine what level of flow accumulation would constitute a "headwater"
            in this study was difficult to base off existing literature, as it was found to be either too complex (requiring
            data on soil composition and vegetation - all outside the scope of this study) or too simplistic (using a default value
            of 1% of the total catchment outlfow, which for this study would only mirror existing stream data and not include
            surface runoff direction/ephemeral stream creation)
            </li>
        </ul>
        <h3 class="title-left">Outcomes</h3>
        <ul>
            <li>The final model created used the Enhanced Flow Direction Grid(EFDIR) from Ontario Integrated Hydrology data 
            with tools from the Arc Hydro tool set imported into ArcGIS Pro 2.7 to construct a stream layer with a threshold value
            of 150.</li>
        </ul>
        <div class="col-12">
            <img src="images/EFDIRarchydroModelImage.jpg" class="exp-image" alt="ArcGIS Pro Model to construct streams from EFDRI with Arc Hydro tools">
        </div>
            <p>Model used to construct streams in the Area Of Interest</p>
        <ul>
            <li>Inputs were set to parameters to allow the user to quickly reset inputs and stream threshold so many combinations could
            be easily created and compared for analysis.</li>
            <li>After examining many possible stream threshold value from the various combinations of DEM or EFDIR input and built-in 
            hydrology tools or Arc Hydro tools, the final model was chosen.</li>
        </ul>
        <div class="col-12">
            <img src="images/StreamThresholdTestsSpreadsheetImage.jpg" class="exp-image" alt="Spreadsheet of inputs and stream thresholds test in models">
        </div>
            <p>Clip of spreadsheet used to track combinations of input data, toolset used and stream threshold.</p>
        <ul>
            <li>The top selected models were shared with the NCC and discussed to settle on the final model from the EFDIR data using 
            Arc Hydro tools with a stream threshold of 150.  THough it is known that this creates Strahler Order 1 streams that are 
            ephemeral, this was preferred by the client.</li>
            <li>Aquatic Resource Area data was incorporated with stream model data to a stream segments layer that contains only segments 
            in areas designated as cold water.</li>
        </ul>
        <div class="col-12">
            <img src="images/coldwatersegmentsexample.jpg" class="exp-image" alt="Cold water segments shown against all streams in Great Trent area">
        </div>
            <p>Cold water segments shown against all streams show important fish habitats.</p>
        <h3 class="title-left">Recommendations</h3>
        <ul>
            <li>More in-depth study of headwaters could be performed with more time.  They could be formed using multi-criteria analysis
            that includes landform data (which could be determined by spectral analysis of satellite imagery) and geological data on 
            soil composition and porosity, also perhaps using more finely-grained elevation data if available.</li>
        </ul>
    </div>
    </section>
    <section class="col-12">
        <h2 id="visualization">Phase 3: Visualization</h2>
    <div class="section-style-1col">
        <h3 class="title-left">Challenges Encountered</h3>
        <ul>
            <li>Client wanted a dark theme background on their static map.</li>
            <li>Static map was to be 3' x 4' size, and there are not many printing resources available to print poster quality images
            in this size.</li>
            <li>Content created for the dynamic map was created using the Fleming AGOL account before we were aware that the account 
            licensing forbids moving any material to any outside account, so the maps all needed to be rebuilt in NCC AGOL.</li>
        </ul>
        <h3 class="title-left">Outcomes</h3>
        <ul>
            <li>Created 4 Static Map files for printing: 2' x 3' with colour optimized for print, 2' x 3' with colour uptimized for digital
            3' x 4' with colour optimized for print and 3' x 4' with colour optimized for digital.  This allows the NCC to print a smaller
            version if necessary to get the desired print quality form local resources, and also to have digital version to share if desired.</li>
        </ul>
        <div class="col-12">
            <img src="images/printmaplarge.jpg" class="exp-image" alt="Map of streams in Area Of Interest with dark background and inset focal area outlines">
        </div>
            <p>Static Map prepared for 3' x 4' print with dark background and streams visualized by Strahler stream order.</p>
        <ul>
            <li>Custom Web Experience on AGOL contains dynamic map with same background and thematic symbology as well as views for 
            specific focal areas.</li>
        </ul>
        <div class="col-12">
            <img src="images/ExperienceImage.jpg" class="exp-image" alt="Online Experience web map of Area Of Interest with identical symbology to print map">
        </div>
            <p>Map of Area Of Interest from Web App with same colours and symbology as print map</p>
        <h3 class="title-left">Recommendations</h3>
        <ul>
            <li>Colours on printed material vary from one printer to another, or even with their current ink loads, so it would be 
            helpful for a print job like this to sample smaller sized versions at various printing options.  The Team did several
            test prints at 8.5 x 11 from Staples to determine if they were a viable options for the client, and they print well up to
            2' x 3', but print quality is poor above that size, so online printers may be the best option.</li>
        </ul>
    </div>
    </section>
  
    <section class="col-12 background-grey">
        <h2 id="programming">Phase 4: Programming and Customization</h2>
    <div class="section-style-1col">
        <h3 class="title-left">Challenges Encountered</h3>
        <ul>
            <li>Experience Builder Developer is too complex to work with in the time frame for this project.</li>
            <li>Trace network tools are only slightly customizable even in ArcPy.</li>
        </ul>
        <h3 class="title-left">Outcomes</h3>
        <ul>
            <li>Two tools were created for use in ArcGIS Pro 2.7 and higher that utilize a trace network (trace networks were
            created to be used with this tool in Pro from model outputs and their smoothed versions that were used in the static map)
            to select all connected stream segments either downstream or upstream of a selected point.  These tools utilize the 
            functionality of trace networks but customized to facilitate use by users with little to no experience working with 
            ArcGIS Pro so that trace networks to be followed and input point selection are easily run from a GUI when the tool 
            is run as a Geoprocessing Tool in Pro.</li>
            <li>This was accomplished by customizing the script for the basic tool functions using Python and ArcPy and then resetting the 
            tool parameters in Pro using a reference point layer.</li>
        </ul>
         <div class="col-12">
            <img src="images/tracetooluserinputset.jpg" class="exp-image" alt="Tool parameters set to user input based on reference layer">
            <img src="images/tracetoolreferencelayer.jpg" class="exp-image" alt="Reference layer defined and saved with study data">
        </div>
            <p>Customizing the Trace tools makes them easy for inexperienced Pro users</p>
        <div class="col-12">
            <img src="images/tracedownToolInterface.jpg" class="exp-image2" alt="Geoprocessing Tool GUI with easy user interface">
        </div>
            <p>Making complex trace tools available in such a simple interface makes powerful functionality more accessible</p>
        <ul>
            <li>Experience Builder provided customizable widgets that were helpful in displaying the project data in a dynamic
            web map presentation.  The ability to quickly navigate multiple views enabled the easy visualization of 8 distinct 
            focal areas as defined by the NCC for ease of use.</li>
        </ul>
        <div class="col-12">
            <img src="images/webex_focalAreas.jpg" class="exp-image" alt="Stream map images of Cold Creek, Murray Marsh and Fleetwood Creek side-by-side">
        </div>
            <p>Quick comparison between specific areas is facilitated by focal area views</p>
        <ul>
            <li>The ability to easily make specific layers visible or invisible, or to adjust their opacity, provides opportunity
            for useful visualization to compare the layer of modelled streams with layers of cold water data.  This app contains 
            data on what stream segments are classified as cold water for fish habitats, and this can be visualized by making the 
            cold water layer visible and decreasing the opacity of the stream layer to help the cold water segments stand out.</li>
        </ul>
        <div class="col-12">
            <img src="images/webex_opacity3.jpg" class="exp-image2" alt="Cold water segments visible over stream layer that is translucent">
        </div>
            <p>Cold water segments in addition to headwaters are important to conservation efforts</p>
        <h3 class="title-left">Recommendations</h3>
        <ul>
            <li>It is still perhaps possible to build a downstream trace tool for Experience Builder by creating a custom widget with 
            Developers tools, but this was not possible given the team experience and time available, and the constraints of the client 
            AGOL account version which does not support trace networks.</li>
        </ul>
    </div>
        <footer class="col-12 background-grey outer-margin">
            <div id="footer-images">
                <img src="images/FlemingSENRS_noBackground.png" alt="Fleming School of the Environment and Natural Resources Logo" style="height: 100%">
                <img src="images/FlemingGIS_000_SM.png" alt="Fleming GIS Program Logo" style="height: 100%">
                <img src="images/logo.png" alt="Happy Puppies Team Logo" style="height: 100%">
                <img src="images/ncc_logo.png" alt="Nature Conservancy of Canada Logo" style="height: 100%">
                <p class="no-top background-grey">&#9400; APST62 2021 The Happy Puppies</p>
            </div>
        </footer>
    </section>
</body>
</html>